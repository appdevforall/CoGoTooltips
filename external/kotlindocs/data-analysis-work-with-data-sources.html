<html>
 <head>
  <meta charset="utf-8"/>
  <link href="doc_style.css" rel="stylesheet"/>
 </head>
 <body>
  <a class="menu-link" href="toc.html">
   MENU
  </a>
  <hr/>
  <div class="article-content">
   <h1 data-toc="data-analysis-work-with-data-sources" id="data-analysis-work-with-data-sources.md">
    Retrieve data from files
   </h1>
   <p id="rjo8vn_2">
    <a data-tooltip="Kotlin Notebook is a dynamic plugin for IntelliJ IDEA that provides an interactive environment to create and edit notebooks, leveraging the full potential of Kotlin's capabilities." href="kotlin-notebook-overview.html" id="rjo8vn_11">
     Kotlin Notebook
    </a>
    , coupled with the
    <a data-external="true" href="https://kotlin.github.io/dataframe/gettingstarted.html" id="rjo8vn_12" rel="noopener noreferrer">
     Kotlin DataFrame library
    </a>
    , enables you to work with both non-structured and structured data. This combination offers the flexibility to transform non-structured data, such as data found in TXT files, into structured datasets.
   </p>
   <p id="rjo8vn_3">
    For data transformations, you can use such methods as
    <a data-external="true" href="https://kotlin.github.io/dataframe/adddf.html" id="rjo8vn_13" rel="noopener noreferrer">
     <code class="code" id="rjo8vn_17">
      add
     </code>
    </a>
    ,
    <a data-external="true" href="https://kotlin.github.io/dataframe/split.html" id="rjo8vn_14" rel="noopener noreferrer">
     <code class="code" id="rjo8vn_18">
      split
     </code>
    </a>
    ,
    <a data-external="true" href="https://kotlin.github.io/dataframe/convert.html" id="rjo8vn_15" rel="noopener noreferrer">
     <code class="code" id="rjo8vn_19">
      convert
     </code>
    </a>
    , and
    <a data-external="true" href="https://kotlin.github.io/dataframe/parse.html" id="rjo8vn_16" rel="noopener noreferrer">
     <code class="code" id="rjo8vn_20">
      parse
     </code>
    </a>
    . Additionally, this toolset enables the retrieval and manipulation of data from various structured file formats, including CSV, JSON, XLS, XLSX, and Apache Arrow.
   </p>
   <p id="rjo8vn_4">
    In this guide, you can learn how to retrieve, refine, and handle data through multiple examples.
   </p>
   <section class="chapter">
    <h2 data-toc="before-you-start" id="before-you-start">
     Before you start
    </h2>
    <ol class="list _decimal" id="rjo8vn_21" type="1">
     <li class="list__item" id="rjo8vn_22">
      <p id="rjo8vn_26">
       Download and install the latest version of
       <a data-external="true" href="https://www.jetbrains.com/idea/download/?section=mac" id="rjo8vn_27" rel="noopener noreferrer">
        IntelliJ IDEA Ultimate
       </a>
       .
      </p>
     </li>
     <li class="list__item" id="rjo8vn_23">
      <p id="rjo8vn_28">
       Install the
       <a data-external="true" href="https://plugins.jetbrains.com/plugin/16340-kotlin-notebook" id="rjo8vn_30" rel="noopener noreferrer">
        Kotlin Notebook plugin
       </a>
       in IntelliJ IDEA.
      </p>
      <aside class="prompt" data-title="" data-type="tip" id="rjo8vn_29">
       <p id="rjo8vn_31">
        Alternatively, access the Kotlin Notebook plugin from
        <span class="control" id="rjo8vn_32">
         Settings
        </span>
        |
        <span class="control" id="rjo8vn_33">
         Plugins
        </span>
        |
        <span class="control" id="rjo8vn_34">
         Marketplace
        </span>
        within IntelliJ IDEA.
       </p>
      </aside>
     </li>
     <li class="list__item" id="rjo8vn_24">
      <p id="rjo8vn_35">
       Create a new Kotlin Notebook by selecting
       <span class="control" id="rjo8vn_36">
        File
       </span>
       |
       <span class="control" id="rjo8vn_37">
        New
       </span>
       |
       <span class="control" id="rjo8vn_38">
        Kotlin Notebook
       </span>
       .
      </p>
     </li>
     <li class="list__item" id="rjo8vn_25">
      <p id="rjo8vn_39">
       In the Kotlin Notebook, import the Kotlin DataFrame library by running the following command:
      </p>
      <div class="code-block" data-lang="kotlin">
       %use dataframe
      </div>
     </li>
    </ol>
   </section>
   <section class="chapter">
    <h2 data-toc="retrieve-data-from-a-file" id="retrieve-data-from-a-file">
     Retrieve data from a file
    </h2>
    <p id="rjo8vn_41">
     To retrieve data from a file in Kotlin Notebook:
    </p>
    <ol class="list _decimal" id="rjo8vn_42" type="1">
     <li class="list__item" id="rjo8vn_45">
      <p id="rjo8vn_48">
       Open your Kotlin Notebook file (
       <code class="code" id="rjo8vn_49">
        .ipynb
       </code>
       ).
      </p>
     </li>
     <li class="list__item" id="rjo8vn_46">
      <p id="rjo8vn_50">
       Import the Kotlin DataFrame library by adding
       <code class="code" id="rjo8vn_52">
        %use dataframe
       </code>
       in a code cell at the start of your notebook.
      </p>
      <aside class="prompt" data-title="" data-type="note" id="rjo8vn_51">
       <p id="rjo8vn_53">
        Make sure to run the code cell with the
        <code class="code" id="rjo8vn_54">
         %use dataframe
        </code>
        line before you run any other code cells that rely on the Kotlin DataFrame library.
       </p>
      </aside>
     </li>
     <li class="list__item" id="rjo8vn_47">
      <p id="rjo8vn_55">
       Use the
       <a data-external="true" href="https://kotlin.github.io/dataframe/read.html" id="rjo8vn_56" rel="noopener noreferrer">
        <code class="code" id="rjo8vn_58">
         .read()
        </code>
       </a>
       function from the Kotlin DataFrame library to retrieve data. For example, to read a CSV file, use:
       <code class="code" id="rjo8vn_57">
        DataFrame.read("example.csv")
       </code>
       .
      </p>
     </li>
    </ol>
    <p id="rjo8vn_43">
     The
     <code class="code" id="rjo8vn_59">
      .read()
     </code>
     function automatically detects the input format based on the file extension and content. You can also add other arguments to customize the function, such as specifying the delimiter with
     <code class="code" id="rjo8vn_60">
      delimiter = ';'
     </code>
     .
    </p>
    <aside class="prompt" data-title="" data-type="tip" id="rjo8vn_44">
     <p id="rjo8vn_61">
      For a comprehensive overview of additional file formats and a variety of read functions, see the
      <a data-external="true" href="https://kotlin.github.io/dataframe/read.html" id="rjo8vn_62" rel="noopener noreferrer">
       Kotlin DataFrame library documentation
      </a>
      .
     </p>
    </aside>
   </section>
   <section class="chapter">
    <h2 data-toc="display-data" id="display-data">
     Display data
    </h2>
    <p id="rjo8vn_63">
     Once you
     <a data-tooltip="To retrieve data from a file in Kotlin Notebook:" href="#retrieve-data-from-a-file" id="rjo8vn_71">
      have the data in your notebook
     </a>
     , you can easily store it in a variable and access it by running the following in a code cell:
    </p>
    <div class="code-block" data-lang="kotlin">
     val dfJson = DataFrame.read("jsonFile.json")
dfJson
    </div>
    <p id="rjo8vn_65">
     This code displays the data from the file of your choice, such as CSV, JSON, XLS, XLSX, or Apache Arrow.
    </p>
    <figure id="rjo8vn_66">
     <img alt="Display data" height="184" src="images/display-data.png" title="Display data" width="700"/>
    </figure>
    <p id="rjo8vn_67">
     To gain insights into the structure or schema of your data, apply the
     <code class="code" id="rjo8vn_72">
      .schema()
     </code>
     function on your DataFrame variable. For example,
     <code class="code" id="rjo8vn_73">
      dfJson.schema()
     </code>
     lists the type of each column in your JSON dataset.
    </p>
    <figure id="rjo8vn_68">
     <img alt="Schema example" height="143" src="images/schema-data-analysis.png" title="Schema example" width="700"/>
    </figure>
    <p id="rjo8vn_69">
     You can also use the autocompletion feature in Kotlin Notebook to quickly access and manipulate the properties of your DataFrame. After loading your data, simply type the DataFrame variable followed by a dot to see a list of available columns and their types.
    </p>
    <figure id="rjo8vn_70">
     <img alt="Available properties" height="230" src="images/auto-completion-data-analysis.png" title="Available properties" width="700"/>
    </figure>
   </section>
   <section class="chapter">
    <h2 data-toc="refine-data" id="refine-data">
     Refine data
    </h2>
    <p id="rjo8vn_74">
     Among the various operations available in the Kotlin DataFrame library for refining your dataset, key examples include
     <a data-external="true" href="https://kotlin.github.io/dataframe/group.html" id="rjo8vn_83" rel="noopener noreferrer">
      grouping
     </a>
     ,
     <a data-external="true" href="https://kotlin.github.io/dataframe/filter.html" id="rjo8vn_84" rel="noopener noreferrer">
      filtering
     </a>
     ,
     <a data-external="true" href="https://kotlin.github.io/dataframe/update.html" id="rjo8vn_85" rel="noopener noreferrer">
      updating
     </a>
     , and
     <a data-external="true" href="https://kotlin.github.io/dataframe/add.html" id="rjo8vn_86" rel="noopener noreferrer">
      adding new columns
     </a>
     . These functions are essential for data analysis, allowing you to organize, clean, and transform your data effectively.
    </p>
    <p id="rjo8vn_75">
     Let's look at an example where the data includes movie titles and their corresponding release year in the same cell. The goal is to refine this dataset for easier analysis:
    </p>
    <ol class="list _decimal" id="rjo8vn_76" type="1">
     <li class="list__item" id="rjo8vn_87">
      <p id="rjo8vn_91">
       Load your data into the notebook using the
       <code class="code" id="rjo8vn_93">
        .read()
       </code>
       function. This example involves reading data from a CSV file named
       <code class="code" id="rjo8vn_94">
        movies.csv
       </code>
       and creating a DataFrame called
       <code class="code" id="rjo8vn_95">
        movies
       </code>
       :
      </p>
      <div class="code-block" data-lang="kotlin">
       val movies = DataFrame.read("movies.csv")
      </div>
     </li>
     <li class="list__item" id="rjo8vn_88">
      <p id="rjo8vn_96">
       Extract the release year from the movie titles using regex and add it as a new column:
      </p>
      <div class="code-block" data-lang="kotlin">
       val moviesWithYear = movies
    .add("year") { 
        "\\d{4}".toRegex()
            .findAll(title)
            .lastOrNull()
            ?.value
            ?.toInt()
            ?: -1
    }
      </div>
     </li>
     <li class="list__item" id="rjo8vn_89">
      <p id="rjo8vn_98">
       Modify the movie titles by removing the release year from each title. This cleans up the titles for consistency:
      </p>
      <div class="code-block" data-lang="kotlin">
       val moviesTitle = moviesWithYear
    .update("title") {
        "\\s*\\(\\d{4}\\)\\s*$".toRegex().replace(title, "")
    }
      </div>
     </li>
     <li class="list__item" id="rjo8vn_90">
      <p id="rjo8vn_100">
       Use the
       <code class="code" id="rjo8vn_102">
        filter
       </code>
       method to focus on specific data. In this case, the dataset is filtered to focus on movies that were released after the year 1996:
      </p>
      <div class="code-block" data-lang="kotlin">
       val moviesNew = moviesWithYear.filter { year &gt;= 1996 }
moviesNew
      </div>
     </li>
    </ol>
    <p id="rjo8vn_77">
     For comparison, here is the dataset before refinement:
    </p>
    <figure id="rjo8vn_78">
     <img alt="Original dataset" height="180" src="images/original-dataset.png" title="Original dataset" width="700"/>
    </figure>
    <p id="rjo8vn_79">
     The refined dataset:
    </p>
    <figure id="rjo8vn_80">
     <img alt="Data refinement result" height="206" src="images/refined-data.png" title="Data refinement result" width="700"/>
    </figure>
    <p id="rjo8vn_81">
     This is a practical demonstration of how you can use the Kotlin DataFrame library's methods, like
     <code class="code" id="rjo8vn_103">
      add
     </code>
     ,
     <code class="code" id="rjo8vn_104">
      update
     </code>
     , and
     <code class="code" id="rjo8vn_105">
      filter
     </code>
     to effectively refine and analyze data in Kotlin.
    </p>
    <aside class="prompt" data-title="" data-type="tip" id="rjo8vn_82">
     <p id="rjo8vn_106">
      For additional use cases and detailed examples, see
      <a data-external="true" href="https://github.com/Kotlin/dataframe/tree/master/examples" id="rjo8vn_107" rel="noopener noreferrer">
       Examples of Kotlin Dataframe
      </a>
      .
     </p>
    </aside>
   </section>
   <section class="chapter">
    <h2 data-toc="save-dataframe" id="save-dataframe">
     Save DataFrame
    </h2>
    <p id="rjo8vn_108">
     After
     <a data-tooltip="Among the various operations available in the Kotlin DataFrame library for refining your dataset, key examples include grouping, filtering, updating, and adding new columns. These functions are essential for data analysis, allowing you to organize, clean, and transform your data…" href="#refine-data" id="rjo8vn_111">
      refining data in Kotlin Notebook
     </a>
     using the Kotlin DataFrame library, you can easily export your processed data. You can utilize a variety of
     <a data-external="true" href="https://kotlin.github.io/dataframe/write.html" id="rjo8vn_112" rel="noopener noreferrer">
      <code class="code" id="rjo8vn_113">
       .write()
      </code>
     </a>
     functions for this purpose, which support saving in multiple formats, including CSV, JSON, XLS, XLSX, Apache Arrow, and even HTML tables. This can be particularly useful for sharing your findings, creating reports, or making your data available for further analysis.
    </p>
    <p id="rjo8vn_109">
     Here's how you can filter a DataFrame, remove a column, save the refined data to a JSON file, and open an HTML table in your browser:
    </p>
    <ol class="list _decimal" id="rjo8vn_110" type="1">
     <li class="list__item" id="rjo8vn_114">
      <p id="rjo8vn_119">
       In Kotlin Notebook, use the
       <code class="code" id="rjo8vn_121">
        .read()
       </code>
       function to load a file named
       <code class="code" id="rjo8vn_122">
        movies.csv
       </code>
       into a DataFrame named
       <code class="code" id="rjo8vn_123">
        moviesDf
       </code>
       :
      </p>
      <div class="code-block" data-lang="kotlin">
       val moviesDf = DataFrame.read("movies.csv")
      </div>
     </li>
     <li class="list__item" id="rjo8vn_115">
      <p id="rjo8vn_124">
       Filter the DataFrame to only include movies that belong to the "Action" genre using the
       <code class="code" id="rjo8vn_126">
        .filter
       </code>
       method:
      </p>
      <div class="code-block" data-lang="kotlin">
       val actionMoviesDf = moviesDf.filter { genres.equals("Action") }
      </div>
     </li>
     <li class="list__item" id="rjo8vn_116">
      <p id="rjo8vn_127">
       Remove the
       <code class="code" id="rjo8vn_129">
        movieId
       </code>
       column from the DataFrame using
       <code class="code" id="rjo8vn_130">
        .remove
       </code>
       :
      </p>
      <div class="code-block" data-lang="kotlin">
       val refinedMoviesDf = actionMoviesDf.remove { movieId }
refinedMoviesDf
      </div>
     </li>
     <li class="list__item" id="rjo8vn_117">
      <p id="rjo8vn_131">
       The Kotlin DataFrame library offers various write functions to save data in different formats. In this example, the
       <a data-external="true" href="https://kotlin.github.io/dataframe/write.html#writing-to-json" id="rjo8vn_133" rel="noopener noreferrer">
        <code class="code" id="rjo8vn_135">
         .writeJson()
        </code>
       </a>
       function is used to save the modified
       <code class="code" id="rjo8vn_134">
        movies.csv
       </code>
       as a JSON file:
      </p>
      <div class="code-block" data-lang="kotlin">
       refinedMoviesDf.writeJson("movies.json")
      </div>
     </li>
     <li class="list__item" id="rjo8vn_118">
      <p id="rjo8vn_136">
       Use the
       <code class="code" id="rjo8vn_138">
        .toStandaloneHTML()
       </code>
       function to convert the DataFrame into a standalone HTML table and open it in your default web browser:
      </p>
      <div class="code-block" data-lang="kotlin">
       refinedMoviesDf.toStandaloneHTML(DisplayConfiguration(rowsLimit = null)).openInBrowser()
      </div>
     </li>
    </ol>
   </section>
   <section class="chapter">
    <h2 data-toc="what-s-next" id="what-s-next">
     What's next
    </h2>
    <ul class="list _bullet" id="rjo8vn_139">
     <li class="list__item" id="rjo8vn_140">
      <p>
       Explore data visualization using the
       <a data-external="true" href="https://kotlin.github.io/kandy/examples.html" id="rjo8vn_143" rel="noopener noreferrer">
        Kandy library
       </a>
      </p>
     </li>
     <li class="list__item" id="rjo8vn_141">
      <p>
       Find additional information about data visualization in
       <a data-tooltip="Kotlin offers an all-in-one-place solution for powerful and flexible data visualization, providing an intuitive way to present and explore data before diving into complex models." href="data-analysis-visualization.html" id="rjo8vn_144">
        Data visualization in Kotlin Notebook with Kandy
       </a>
      </p>
     </li>
     <li class="list__item" id="rjo8vn_142">
      <p>
       For an extensive overview of tools and resources available for data science and analysis in Kotlin, see
       <a data-tooltip="From data collection to model building, Kotlin offers robust libraries facilitating different tasks in the data pipeline." href="data-analysis-libraries.html" id="rjo8vn_145">
        Kotlin and Java libraries for data analysis
       </a>
      </p>
     </li>
    </ul>
   </section>
   <div class="last-modified">
    Last modified: 16 December 2024
   </div>
   <div data-feedback-placeholder="true">
   </div>
  </div>
 </body>
</html>
