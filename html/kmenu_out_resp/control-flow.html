<html>
 <head>
  <meta charset="utf-8"/>
  <link href="doc_style.css" rel="stylesheet"/>
 </head>
 <body>
  <a class="menu-link" href="toc.html">
   MENU
  </a>
  <hr/>
  <div class="article-content">
   <h1 data-toc="control-flow" id="control-flow.md">
    Conditions and loops
   </h1>
   <section class="chapter">
    <h2 data-toc="if-expression" id="if-expression">
     If expression
    </h2>
    <p id="xwytoj_7">
     In Kotlin,
     <code class="code" id="xwytoj_12">
      if
     </code>
     is an expression: it returns a value. Therefore, there is no ternary operator (
     <code class="code" id="xwytoj_13">
      condition ? then : else
     </code>
     ) because ordinary
     <code class="code" id="xwytoj_14">
      if
     </code>
     works fine in this role.
    </p>
    <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.3" data-runnable="true" id="if-else-if-kotlin">
     fun main() {
    val a = 2
    val b = 3

    //sampleStart
    var max = a
    if (a &lt; b) max = b

    // With else
    if (a &gt; b) {
      max = a
    } else {
      max = b
    }

    // As expression
    max = if (a &gt; b) a else b

    // You can also use `else if` in expressions:
    val maxLimit = 1
    val maxOrLimit = if (maxLimit &gt; a) maxLimit else if (a &gt; b) a else b
  
    println("max is $max")
    // max is 3
    println("maxOrLimit is $maxOrLimit")
    // maxOrLimit is 3
    //sampleEnd
}
    </div>
    <p id="xwytoj_9">
     Branches of an
     <code class="code" id="xwytoj_15">
      if
     </code>
     expression can be blocks. In this case, the last expression is the value of a block:
    </p>
    <div class="code-block" data-lang="kotlin">
     val max = if (a &gt; b) {
    print("Choose a")
    a
} else {
    print("Choose b")
    b
}
    </div>
    <p id="xwytoj_11">
     If you're using
     <code class="code" id="xwytoj_16">
      if
     </code>
     as an expression, for example, for returning its value or assigning it to a variable, the
     <code class="code" id="xwytoj_17">
      else
     </code>
     branch is mandatory.
    </p>
   </section>
   <section class="chapter">
    <h2 data-toc="when-expressions-and-statements" id="when-expressions-and-statements">
     When expressions and statements
    </h2>
    <p id="xwytoj_18">
     <code class="code" id="xwytoj_49">
      when
     </code>
     is a conditional expression that runs code based on multiple possible values or conditions. It is similar to the
     <code class="code" id="xwytoj_50">
      switch
     </code>
     statement in Java, C, and similar languages. For example:
    </p>
    <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.3" data-runnable="true" id="kotlin-conditions-when-statement">
     fun main() {
    //sampleStart
    val x = 2
    when (x) {
        1 -&gt; print("x == 1")
        2 -&gt; print("x == 2")
        else -&gt; print("x is neither 1 nor 2")
    }
    // x == 2
    //sampleEnd
}
    </div>
    <p id="xwytoj_20">
     <code class="code" id="xwytoj_51">
      when
     </code>
     matches its argument against all branches sequentially until some branch condition is satisfied.
    </p>
    <p id="xwytoj_21">
     You can use
     <code class="code" id="xwytoj_52">
      when
     </code>
     in a few different ways. Firstly, you can use
     <code class="code" id="xwytoj_53">
      when
     </code>
     either as an
     <span class="control" id="xwytoj_54">
      expression
     </span>
     or as a
     <span class="control" id="xwytoj_55">
      statement
     </span>
     . As an expression,
     <code class="code" id="xwytoj_56">
      when
     </code>
     returns a value for later use in your code. As a statement,
     <code class="code" id="xwytoj_57">
      when
     </code>
     completes an action without returning anything of further use:
    </p>
    <div class="table-wrapper">
     <table class="wide" id="xwytoj_22">
      <thead>
       <tr class="ijRowHead" id="xwytoj_58">
        <th id="xwytoj_60">
         <p>
          Expression
         </p>
        </th>
        <th id="xwytoj_61">
         <p>
          Statement
         </p>
        </th>
       </tr>
      </thead>
      <tbody>
       <tr id="xwytoj_59">
        <td id="xwytoj_62">
         <div class="code-block" data-lang="kotlin">
          // Returns a string assigned to the 
// text variable
val text = when (x) {
    1 -&gt; "x == 1"
    2 -&gt; "x == 2"
    else -&gt; "x is neither 1 nor 2"
}
         </div>
        </td>
        <td id="xwytoj_63">
         <div class="code-block" data-lang="kotlin">
          // Returns nothing but triggers a 
// print statement
when (x) {
    1 -&gt; print("x == 1")
    2 -&gt; print("x == 2")
    else -&gt; print("x is neither 1 nor 2")
}
         </div>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
    <p id="xwytoj_23">
     Secondly, you can use
     <code class="code" id="xwytoj_66">
      when
     </code>
     with or without a subject. Whether you use a subject with
     <code class="code" id="xwytoj_67">
      when
     </code>
     or not, your expression or statement behaves the same. We recommend using
     <code class="code" id="xwytoj_68">
      when
     </code>
     with a subject when possible, as it makes your code easier to read and maintain by clearly showing what you're checking.
    </p>
    <div class="table-wrapper">
     <table class="wide" id="xwytoj_24">
      <thead>
       <tr class="ijRowHead" id="xwytoj_69">
        <th id="xwytoj_71">
         <p>
          With subject
          <code class="code" id="xwytoj_73">
           x
          </code>
         </p>
        </th>
        <th id="xwytoj_72">
         <p>
          Without subject
         </p>
        </th>
       </tr>
      </thead>
      <tbody>
       <tr id="xwytoj_70">
        <td id="xwytoj_74">
         <div class="code-block" data-lang="kotlin">
          when(x) { ... }
         </div>
        </td>
        <td id="xwytoj_75">
         <div class="code-block" data-lang="kotlin">
          when { ... }
         </div>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
    <p id="xwytoj_25">
     Depending on how you use
     <code class="code" id="xwytoj_78">
      when
     </code>
     , there are different requirements for whether you need to cover all possible cases in your branches.
    </p>
    <p id="xwytoj_26">
     If you use
     <code class="code" id="xwytoj_79">
      when
     </code>
     as a statement, you don't have to cover all possible cases. In this example, some cases aren't covered, so nothing happens. However, no error occurs:
    </p>
    <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.3" data-runnable="true" id="kotlin-when-statement">
     fun main() {
    //sampleStart
    val x = 3
    when (x) {
        // Not all cases are covered
        1 -&gt; print("x == 1")
        2 -&gt; print("x == 2")
    }
    //sampleEnd
}
    </div>
    <p id="xwytoj_28">
     In a
     <code class="code" id="xwytoj_80">
      when
     </code>
     statement, the values of individual branches are ignored. Just like with
     <code class="code" id="xwytoj_81">
      if
     </code>
     , each branch can be a block, and its value is the value of the last expression in the block.
    </p>
    <p id="xwytoj_29">
     If you use
     <code class="code" id="xwytoj_82">
      when
     </code>
     as an expression, you have to cover all possible cases. In other words, it must be
     <span class="emphasis" id="xwytoj_83">
      exhaustive
     </span>
     . The value of the first matching branch becomes the value of the overall expression. If you don't cover all cases, the compiler throws an error.
    </p>
    <p id="xwytoj_30">
     If your
     <code class="code" id="xwytoj_84">
      when
     </code>
     expression has a subject, you can use an
     <code class="code" id="xwytoj_85">
      else
     </code>
     branch to make sure that all possible cases are covered, but it isn't mandatory. For example, if your subject is a
     <code class="code" id="xwytoj_86">
      Boolean
     </code>
     ,
     <a data-tooltip="The most basic use case for enum classes is the implementation of type-safe enums:" href="enum-classes.html" id="xwytoj_87">
      <code class="code" id="xwytoj_90">
       enum
      </code>
      class
     </a>
     ,
     <a data-tooltip="Sealed classes and interfaces provide controlled inheritance of your class hierarchies. All direct subclasses of a sealed class are known at compile time. No other subclasses may appear outside the module and package within which the sealed class is defined. The same logic applies…" href="sealed-classes.html" id="xwytoj_88">
      <code class="code" id="xwytoj_91">
       sealed
      </code>
      class
     </a>
     , or one of their nullable counterparts, you can cover all cases without an
     <code class="code" id="xwytoj_89">
      else
     </code>
     branch:
    </p>
    <div class="code-block" data-lang="kotlin">
     enum class Bit {
    ZERO, ONE
}

val numericValue = when (getRandomBit()) {
  // No else branch is needed because all cases are covered
    Bit.ZERO -&gt; 0
    Bit.ONE -&gt; 1
}
    </div>
    <p id="xwytoj_32">
     If your
     <code class="code" id="xwytoj_92">
      when
     </code>
     expression
     <span class="control" id="xwytoj_93">
      doesn't
     </span>
     have a subject, you
     <span class="control" id="xwytoj_94">
      must
     </span>
     have an
     <code class="code" id="xwytoj_95">
      else
     </code>
     branch or the compiler throws an error. The
     <code class="code" id="xwytoj_96">
      else
     </code>
     branch is evaluated when none of the other branch conditions are satisfied:
    </p>
    <div class="code-block" data-lang="kotlin">
     when {
    a &gt; b -&gt; "a is greater than b"
    a &lt; b -&gt; "a is less than b"
    else -&gt; "a is equal to b"
}
    </div>
    <p id="xwytoj_34">
     <code class="code" id="xwytoj_97">
      when
     </code>
     expressions and statements offer different ways to simplify your code, handle multiple conditions, and perform type checks.
    </p>
    <p id="xwytoj_35">
     You can define a common behavior for multiple cases by combining their conditions in a single line with a comma:
    </p>
    <div class="code-block" data-lang="kotlin">
     when (x) {
    0, 1 -&gt; print("x == 0 or x == 1")
    else -&gt; print("otherwise")
}
    </div>
    <p id="xwytoj_37">
     You can use arbitrary expressions (not only constants) as branch conditions:
    </p>
    <div class="code-block" data-lang="kotlin">
     when (x) {
    s.toInt() -&gt; print("s encodes x")
    else -&gt; print("s does not encode x")
}
    </div>
    <p id="xwytoj_39">
     You can also check whether a value is or isn't contained in a
     <a data-tooltip="Kotlin lets you easily create ranges of values using the .rangeTo() and .rangeUntil() functions from the kotlin.ranges package." href="ranges.html" id="xwytoj_98">
      range
     </a>
     or collection via the
     <code class="code" id="xwytoj_99">
      in
     </code>
     or
     <code class="code" id="xwytoj_100">
      !in
     </code>
     keywords:
    </p>
    <div class="code-block" data-lang="kotlin">
     when (x) {
    in 1..10 -&gt; print("x is in the range")
    in validNumbers -&gt; print("x is valid")
    !in 10..20 -&gt; print("x is outside the range")
    else -&gt; print("none of the above")
}
    </div>
    <p id="xwytoj_41">
     Additionally, you can check that a value is or isn't a particular type via the
     <code class="code" id="xwytoj_101">
      is
     </code>
     or
     <code class="code" id="xwytoj_102">
      !is
     </code>
     keywords. Note that, due to
     <a data-tooltip="In most cases, you don't need to use explicit cast operators because the compiler automatically casts objects for you. This is called smart-casting. The compiler tracks the type checks and explicit casts for immutable values and inserts implicit (safe) casts automatically when…" href="typecasts.html#smart-casts" id="xwytoj_103">
      smart casts
     </a>
     , you can access the member functions and properties of the type without any additional checks.
    </p>
    <div class="code-block" data-lang="kotlin">
     fun hasPrefix(x: Any) = when(x) {
    is String -&gt; x.startsWith("prefix")
    else -&gt; false
}
    </div>
    <p id="xwytoj_43">
     You can use
     <code class="code" id="xwytoj_104">
      when
     </code>
     as a replacement for an
     <code class="code" id="xwytoj_105">
      if
     </code>
     -
     <code class="code" id="xwytoj_106">
      else
     </code>
     <code class="code" id="xwytoj_107">
      if
     </code>
     chain. If there's no subject, the branch conditions are simply boolean expressions. The first branch with a
     <code class="code" id="xwytoj_108">
      true
     </code>
     condition runs:
    </p>
    <div class="code-block" data-lang="kotlin">
     when {
    x.isOdd() -&gt; print("x is odd")
    y.isEven() -&gt; print("y is even")
    else -&gt; print("x+y is odd")
}
    </div>
    <p id="xwytoj_45">
     You can capture the subject in a variable by using the following syntax:
    </p>
    <div class="code-block" data-lang="kotlin">
     fun Request.getBody() =
    when (val response = executeRequest()) {
        is Success -&gt; response.body
        is HttpError -&gt; throw HttpException(response.status)
    }
    </div>
    <p id="xwytoj_47">
     The scope of a variable introduced as the subject is restricted to the body of the
     <code class="code" id="xwytoj_109">
      when
     </code>
     expression or statement.
    </p>
    <section class="chapter">
     <h3 data-toc="guard-conditions-in-when-expressions" id="guard-conditions-in-when-expressions">
      Guard conditions in when expressions
     </h3>
     <aside class="prompt" data-title="" data-type="warning" id="xwytoj_110">
      <p id="xwytoj_123">
       Guard conditions are an
       <a data-tooltip="Here's a quick guide to these stability levels and their meaning:" href="components-stability.html#stability-levels-explained" id="xwytoj_124">
        experimental feature
       </a>
       that may be changed at any time. We would appreciate your feedback in
       <a data-external="true" href="https://youtrack.jetbrains.com/issue/KT-71140/Guard-conditions-in-when-expressions-feedback" id="xwytoj_125" rel="noopener noreferrer">
        YouTrack
       </a>
       .
      </p>
     </aside>
     <p id="xwytoj_111">
      Guard conditions allow you to include more than one condition to the branches of a
      <code class="code" id="xwytoj_126">
       when
      </code>
      expression, making complex control flow more explicit and concise. You can use guard conditions in
      <code class="code" id="xwytoj_127">
       when
      </code>
      expressions or statements with a subject.
     </p>
     <p id="xwytoj_112">
      To include a guard condition in a branch, place it after the primary condition, separated by
      <code class="code" id="xwytoj_128">
       if
      </code>
      :
     </p>
     <div class="code-block" data-lang="kotlin">
      sealed interface Animal {
    data class Cat(val mouseHunter: Boolean) : Animal
    data class Dog(val breed: String) : Animal
}

fun feedAnimal(animal: Animal) {
    when (animal) {
        // Branch with only primary condition. Calls `feedDog()` when `Animal` is `Dog`
        is Animal.Dog -&gt; feedDog()
        // Branch with both primary and guard conditions. Calls `feedCat()` when `Animal` is `Cat` and is not `mouseHunter`
        is Animal.Cat if !animal.mouseHunter -&gt; feedCat()
        // Prints "Unknown animal" if none of the above conditions match
        else -&gt; println("Unknown animal")
    }
}
     </div>
     <p id="xwytoj_114">
      In a single
      <code class="code" id="xwytoj_129">
       when
      </code>
      expression, you can combine branches with and without guard conditions. The code in a branch with a guard condition runs only if both the primary condition and the guard condition evaluate to true. If the primary condition does not match, the guard condition is not evaluated.
     </p>
     <p id="xwytoj_115">
      If you use guard conditions in
      <code class="code" id="xwytoj_130">
       when
      </code>
      statements without an
      <code class="code" id="xwytoj_131">
       else
      </code>
      branch, and none of the conditions matches, none of the branches is executed.
     </p>
     <p id="xwytoj_116">
      Otherwise, if you use guard conditions in
      <code class="code" id="xwytoj_132">
       when
      </code>
      expressions without an
      <code class="code" id="xwytoj_133">
       else
      </code>
      branch, the compiler requires you to declare all the possible cases to avoid runtime errors.
     </p>
     <p id="xwytoj_117">
      Additionally, guard conditions support
      <code class="code" id="xwytoj_134">
       else if
      </code>
      :
     </p>
     <div class="code-block" data-lang="kotlin">
      when (animal) {
    // Checks if `animal` is `Dog`
    is Animal.Dog -&gt; feedDog()
    // Guard condition that checks if `animal` is `Cat` and not `mouseHunter`
    is Animal.Cat if !animal.mouseHunter -&gt; feedCat()
    // Calls giveLettuce() if none of the above conditions match and animal.eatsPlants is true
    else if animal.eatsPlants -&gt; giveLettuce()
    // Prints "Unknown animal" if none of the above conditions match
    else -&gt; println("Unknown animal")
}
     </div>
     <p id="xwytoj_119">
      Combine multiple guard conditions within a single branch using the boolean operators
      <code class="code" id="xwytoj_135">
       &amp;&amp;
      </code>
      (AND) or
      <code class="code" id="xwytoj_136">
       ||
      </code>
      (OR). Use parentheses around the boolean expressions to
      <a data-tooltip="Use parentheses when combining multiple boolean expressions in when expressions or statements with guard conditions:" href="coding-conventions.html#guard-conditions-in-when-expression" id="xwytoj_137">
       avoid confusion
      </a>
      :
     </p>
     <div class="code-block" data-lang="kotlin">
      when (animal) {
    is Animal.Cat if (!animal.mouseHunter &amp;&amp; animal.hungry) -&gt; feedCat()
}
     </div>
     <p id="xwytoj_121">
      You can use guard conditions in any
      <code class="code" id="xwytoj_138">
       when
      </code>
      expression or statement with a subject, except the case when you have multiple conditions separated by a comma. For example,
      <code class="code" id="xwytoj_139">
       0, 1 -&gt; print("x == 0 or x == 1")
      </code>
      .
     </p>
     <aside class="prompt" data-title="" data-type="note" id="xwytoj_122">
      <p id="xwytoj_140">
       To enable guard conditions in CLI, run the following command:
      </p>
      <p id="xwytoj_141">
       <code class="code" id="xwytoj_144">
        kotlinc -Xwhen-guards main.kt
       </code>
      </p>
      <p id="xwytoj_142">
       To enable guard conditions in Gradle, add the following line to the
       <code class="code" id="xwytoj_145">
        build.gradle.kts
       </code>
       file:
      </p>
      <p id="xwytoj_143">
       <code class="code" id="xwytoj_146">
        kotlin.compilerOptions.freeCompilerArgs.add("-Xwhen-guards")
       </code>
      </p>
     </aside>
    </section>
   </section>
   <section class="chapter">
    <h2 data-toc="for-loops" id="for-loops">
     For loops
    </h2>
    <p id="xwytoj_147">
     The
     <code class="code" id="xwytoj_161">
      for
     </code>
     loop iterates through anything that provides an iterator. This is equivalent to the
     <code class="code" id="xwytoj_162">
      foreach
     </code>
     loop in languages like C#. The syntax of
     <code class="code" id="xwytoj_163">
      for
     </code>
     is the following:
    </p>
    <div class="code-block" data-lang="kotlin">
     for (item in collection) print(item)
    </div>
    <p id="xwytoj_149">
     The body of
     <code class="code" id="xwytoj_164">
      for
     </code>
     can be a block.
    </p>
    <div class="code-block" data-lang="kotlin">
     for (item: Int in ints) {
    // ...
}
    </div>
    <p id="xwytoj_151">
     As mentioned before,
     <code class="code" id="xwytoj_165">
      for
     </code>
     iterates through anything that provides an iterator. This means that it:
    </p>
    <ul class="list _bullet" id="xwytoj_152">
     <li class="list__item" id="xwytoj_166">
      <p>
       has a member or an extension function
       <code class="code" id="xwytoj_167">
        iterator()
       </code>
       that returns
       <code class="code" id="xwytoj_168">
        Iterator&lt;&gt;
       </code>
       , which:
      </p>
      <ul class="list _bullet" id="xwytoj_169">
       <li class="list__item" id="xwytoj_170">
        <p>
         has a member or an extension function
         <code class="code" id="xwytoj_172">
          next()
         </code>
        </p>
       </li>
       <li class="list__item" id="xwytoj_171">
        <p>
         has a member or an extension function
         <code class="code" id="xwytoj_173">
          hasNext()
         </code>
         that returns
         <code class="code" id="xwytoj_174">
          Boolean
         </code>
         .
        </p>
       </li>
      </ul>
     </li>
    </ul>
    <p id="xwytoj_153">
     All of these three functions need to be marked as
     <code class="code" id="xwytoj_175">
      operator
     </code>
     .
    </p>
    <p id="xwytoj_154">
     To iterate over a range of numbers, use a
     <a data-tooltip="Kotlin lets you easily create ranges of values using the .rangeTo() and .rangeUntil() functions from the kotlin.ranges package." href="ranges.html" id="xwytoj_176">
      range expression
     </a>
     :
    </p>
    <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.3" data-runnable="true">
     fun main() {
//sampleStart
    for (i in 1..3) {
        print(i)
    }
    for (i in 6 downTo 0 step 2) {
        print(i)
    }
    // 1236420
//sampleEnd
}
    </div>
    <p id="xwytoj_156">
     A
     <code class="code" id="xwytoj_177">
      for
     </code>
     loop over a range or an array is compiled to an index-based loop that does not create an iterator object.
    </p>
    <p id="xwytoj_157">
     If you want to iterate through an array or a list with an index, you can do it this way:
    </p>
    <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.3" data-runnable="true">
     fun main() {
val array = arrayOf("a", "b", "c")
//sampleStart
    for (i in array.indices) {
        print(array[i])
    }
    // abc
//sampleEnd
}
    </div>
    <p id="xwytoj_159">
     Alternatively, you can use the
     <code class="code" id="xwytoj_178">
      withIndex
     </code>
     library function:
    </p>
    <div class="code-block" data-lang="kotlin" data-min-compiler-version="1.3" data-runnable="true">
     fun main() {
    val array = arrayOf("a", "b", "c")
//sampleStart
    for ((index, value) in array.withIndex()) {
        println("the element at $index is $value")
    }
    // the element at 0 is a
    // the element at 1 is b
    // the element at 2 is c
//sampleEnd
}
    </div>
   </section>
   <section class="chapter">
    <h2 data-toc="while-loops" id="while-loops">
     While loops
    </h2>
    <p id="xwytoj_179">
     <code class="code" id="xwytoj_182">
      while
     </code>
     and
     <code class="code" id="xwytoj_183">
      do-while
     </code>
     loops process their body continuously while their condition is satisfied. The difference between them is the condition checking time:
    </p>
    <ul class="list _bullet" id="xwytoj_180">
     <li class="list__item" id="xwytoj_184">
      <p>
       <code class="code" id="xwytoj_186">
        while
       </code>
       checks the condition and, if it's satisfied, processes the body and then returns to the condition check.
      </p>
     </li>
     <li class="list__item" id="xwytoj_185">
      <p>
       <code class="code" id="xwytoj_187">
        do-while
       </code>
       processes the body and then checks the condition. If it's satisfied, the loop repeats. So, the body of
       <code class="code" id="xwytoj_188">
        do-while
       </code>
       runs at least once regardless of the condition.
      </p>
     </li>
    </ul>
    <div class="code-block" data-lang="kotlin">
     while (x &gt; 0) {
    x--
}

do {
    val y = retrieveData()
} while (y != null) // y is visible here!
    </div>
   </section>
   <section class="chapter">
    <h2 data-toc="break-and-continue-in-loops" id="break-and-continue-in-loops">
     Break and continue in loops
    </h2>
    <p id="xwytoj_189">
     Kotlin supports traditional
     <code class="code" id="xwytoj_190">
      break
     </code>
     and
     <code class="code" id="xwytoj_191">
      continue
     </code>
     operators in loops. See
     <a data-tooltip="Kotlin has three structural jump expressions:" href="returns.html" id="xwytoj_192">
      Returns and jumps
     </a>
     .
    </p>
   </section>
   <div class="last-modified">
    Last modified: 16 December 2024
   </div>
   <div data-feedback-placeholder="true">
   </div>
  </div>
 </body>
</html>
